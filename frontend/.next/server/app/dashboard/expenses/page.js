(()=>{var e={};e.id=342,e.ids=[342],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},7680:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>d,routeModule:()=>u,tree:()=>o}),t(2016),t(2834),t(3201),t(5866);var a=t(3191),r=t(8716),l=t(7922),n=t.n(l),i=t(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let o=["",{children:["dashboard",{children:["expenses",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2016)),"C:\\Users\\jaipr\\Desktop\\itilite\\frontend\\src\\app\\dashboard\\expenses\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2834)),"C:\\Users\\jaipr\\Desktop\\itilite\\frontend\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,3201)),"C:\\Users\\jaipr\\Desktop\\itilite\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\jaipr\\Desktop\\itilite\\frontend\\src\\app\\dashboard\\expenses\\page.tsx"],p="/dashboard/expenses/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/expenses/page",pathname:"/dashboard/expenses",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},953:(e,s,t)=>{Promise.resolve().then(t.bind(t,4268))},8978:(e,s,t)=>{Promise.resolve().then(t.bind(t,511))},3855:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4268:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var a=t(326),r=t(7577),l=t(4224),n=t(1223),i=t(4519),c=t(3855);let o=(0,t(2881).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var d=t(5964),p=t(949);let x={submitted:"primary",finance_approved:"success",finance_rejected:"danger",flagged:"warning"},u={flight:"Flight",hotel:"Hotel",food:"Food",transport:"Transport",other:"Other"};function h(){let[e,s]=(0,r.useState)([]),[t,h]=(0,r.useState)(!0),[m,f]=(0,r.useState)(null),[g,b]=(0,r.useState)(!1),[j,v]=(0,r.useState)({travelRequestId:"",amount:"",category:"other",expenseDate:"",description:""}),[y,N]=(0,r.useState)(null),[q,w]=(0,r.useState)(!1),C=async()=>{try{let e=await l.x1.get("/expenses/my");s(e.data.data||[])}catch(e){f(e.response?.data?.message||"Failed to load expenses")}finally{h(!1)}},Z=async e=>{e.preventDefault(),w(!0),f(null);try{let e=new FormData;e.append("travelRequestId",j.travelRequestId),e.append("amount",j.amount),e.append("category",j.category),e.append("expenseDate",j.expenseDate),e.append("description",j.description),y&&e.append("receipt",y),await l.x1.post("/expenses",e,{headers:{"Content-Type":"multipart/form-data"}}),b(!1),v({travelRequestId:"",amount:"",category:"other",expenseDate:"",description:""}),N(null),C()}catch(e){f(e.response?.data?.message||"Failed to submit expense")}finally{w(!1)}};return t?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(i.$j,{size:"lg"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-surface-100",children:"Expenses"}),a.jsx("p",{className:"text-surface-400 mt-1",children:"Track and submit your travel expenses"})]}),(0,a.jsxs)(i.zx,{onClick:()=>b(!g),children:[a.jsx(c.Z,{className:"h-4 w-4"}),"Add Expense"]})]}),m&&a.jsx("div",{className:"p-4 bg-danger-600/10 border border-danger-600/30 rounded-xl",children:a.jsx("p",{className:"text-sm text-danger-500",children:m})}),g&&(0,a.jsxs)(i.Zb,{children:[a.jsx(i.Ol,{title:"New Expense"}),(0,a.jsxs)("form",{onSubmit:Z,className:"space-y-4",children:[a.jsx(i.II,{id:"travelRequestId",label:"Travel Request ID",placeholder:"Enter travel request ID",value:j.travelRequestId,onChange:e=>v({...j,travelRequestId:e.target.value}),required:!0}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(i.II,{id:"amount",type:"number",label:"Amount (INR)",placeholder:"5000",value:j.amount,onChange:e=>v({...j,amount:e.target.value}),required:!0}),a.jsx(i.Ph,{id:"category",label:"Category",options:[{value:"flight",label:"Flight"},{value:"hotel",label:"Hotel"},{value:"food",label:"Food"},{value:"transport",label:"Transport"},{value:"other",label:"Other"}],value:j.category,onChange:e=>v({...j,category:e.target.value})})]}),a.jsx(i.II,{id:"expenseDate",type:"date",label:"Expense Date",value:j.expenseDate,onChange:e=>v({...j,expenseDate:e.target.value}),required:!0}),a.jsx(i.II,{id:"description",label:"Description",placeholder:"Describe the expense...",value:j.description,onChange:e=>v({...j,description:e.target.value})}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Receipt"}),a.jsx("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("label",{className:"flex items-center gap-2 px-4 py-2.5 bg-surface-700 text-surface-100 rounded-xl cursor-pointer hover:bg-surface-600 transition-colors",children:[a.jsx(o,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:y?y.name:"Upload receipt"}),a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:e=>N(e.target.files?.[0]||null)})]})})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-2",children:[a.jsx(i.zx,{type:"submit",isLoading:q,children:"Submit Expense"}),a.jsx(i.zx,{type:"button",variant:"secondary",onClick:()=>b(!1),children:"Cancel"})]})]})]}),0===e.length?a.jsx(i.Zb,{children:(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(d.Z,{className:"h-12 w-12 text-surface-500 mx-auto mb-3"}),a.jsx("p",{className:"text-surface-400",children:"No expenses submitted yet."})]})}):a.jsx("div",{className:"space-y-4",children:e.map(e=>a.jsx(i.Zb,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(i.Ct,{variant:"neutral",children:u[e.category]}),a.jsx(i.Ct,{variant:x[e.status],children:e.status.replace("_"," ")}),e.violations.length>0&&(0,a.jsxs)(i.Ct,{variant:"warning",children:[a.jsx(p.Z,{className:"h-3 w-3 mr-1"}),"Violation"]})]}),a.jsx("p",{className:"text-lg font-semibold text-surface-100",children:(0,n.xG)(e.amount)}),(0,a.jsxs)("p",{className:"text-sm text-surface-400 mt-1",children:[(0,n.p6)(e.expenseDate),e.description&&` â€¢ ${e.description}`]}),e.flaggedReason&&(0,a.jsxs)("p",{className:"text-sm text-warning-500 mt-2",children:["Flagged: ",e.flaggedReason]})]}),e.receiptUrl&&a.jsx("a",{href:e.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary-400 hover:underline",children:"View Receipt"})]})},e._id))})]})}},511:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>D});var a=t(326),r=t(6170),l=t(5047),n=t(2166),i=t(4519),c=t(9635),o=t(1810);function d(){let e=(0,l.useRouter)(),{user:s,logout:t}=(0,n.aC)();return(0,a.jsxs)("header",{className:"h-16 bg-surface-900 border-b border-surface-700 px-6 flex items-center justify-between",children:[a.jsx("div",{children:a.jsx("h1",{className:"text-lg font-semibold text-surface-100",children:"Dashboard"})}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("div",{className:"p-2 bg-surface-700 rounded-lg",children:a.jsx(c.Z,{className:"h-4 w-4 text-surface-300"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-surface-100",children:s?.name}),a.jsx("p",{className:"text-xs text-surface-500 capitalize",children:s?.role})]})]}),(0,a.jsxs)(i.zx,{variant:"ghost",size:"sm",onClick:()=>{t(),e.push("/login")},children:[a.jsx(o.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})}var p=t(434),x=t(1223),u=t(4319),h=t(6641),m=t(5964),f=t(1292),g=t(6507),b=t(2952),j=t(1383),v=t(1821),y=t(2200),N=t(6283),q=t(6464),w=t(4061),C=t(7546);let Z=[{href:"/dashboard",label:"Overview",icon:u.Z,roles:["employee","manager","admin"],section:"General"},{href:"/dashboard/travel",label:"Travel Requests",icon:h.Z,roles:["employee","manager","admin"]},{href:"/dashboard/expenses",label:"Expenses",icon:m.Z,roles:["employee","manager","admin"]},{href:"/dashboard/bookings",label:"Bookings",icon:f.Z,roles:["employee","manager","admin"]},{href:"/dashboard/notifications",label:"Notifications",icon:g.Z,roles:["employee","manager","admin"]},{href:"/dashboard/manager/travel/pending",label:"Travel Approvals",icon:b.Z,roles:["manager","admin"],section:"Manager"},{href:"/dashboard/approvals",label:"Quick Approvals",icon:j.Z,roles:["manager","admin"]},{href:"/dashboard/finance/expenses/pending",label:"Expense Review",icon:v.Z,roles:["admin"],section:"Finance"},{href:"/dashboard/flagged",label:"Flagged Expenses",icon:y.Z,roles:["admin"]},{href:"/dashboard/policies",label:"Policies",icon:N.Z,roles:["admin"],section:"Admin"},{href:"/dashboard/analytics",label:"Analytics",icon:q.Z,roles:["admin"]},{href:"/dashboard/users",label:"Users",icon:w.Z,roles:["admin"]}];function k(){let e;let s=(0,l.usePathname)(),{role:t}=(0,n.aC)(),r=Z.filter(e=>t&&e.roles.includes(t));return(0,a.jsxs)("aside",{className:"w-64 bg-surface-900 border-r border-surface-700 flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"h-16 flex items-center gap-3 px-6 border-b border-surface-700",children:[a.jsx("div",{className:"p-2 bg-primary-600 rounded-lg",children:a.jsx(C.Z,{className:"h-5 w-5 text-white"})}),a.jsx("span",{className:"text-lg font-bold text-surface-100",children:"ITILITE Lite"})]}),a.jsx("nav",{className:"flex-1 py-4 px-3 overflow-y-auto",children:a.jsx("ul",{className:"space-y-1",children:r.map(t=>{let r=s===t.href||"/dashboard"!==t.href&&s.startsWith(t.href),l=t.section&&t.section!==e;return t.section&&(e=t.section),(0,a.jsxs)("li",{children:[l&&a.jsx("p",{className:"px-3 pt-5 pb-1.5 text-[10px] font-semibold uppercase tracking-wider text-surface-500",children:t.section}),(0,a.jsxs)(p.default,{href:t.href,className:(0,x.cn)("flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-colors duration-150",r?"bg-primary-600/20 text-primary-400":"text-surface-400 hover:bg-surface-800 hover:text-surface-100"),children:[a.jsx(t.icon,{className:"h-5 w-5 flex-shrink-0"}),a.jsx("span",{children:t.label})]})]},t.href)})})}),a.jsx("div",{className:"p-4 border-t border-surface-700",children:a.jsx("p",{className:"text-xs text-surface-500 text-center",children:"Travel & Expense Management"})})]})}function D({children:e}){return a.jsx(r.I,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-surface-950 flex",children:[a.jsx(k,{}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[a.jsx(d,{}),a.jsx("main",{className:"flex-1 p-6 overflow-auto",children:e})]})]})})}},6170:(e,s,t)=>{"use strict";t.d(s,{I:()=>i,p:()=>o});var a=t(326);t(7577);var r=t(5047),l=t(2166),n=t(4519);function i({children:e}){(0,r.useRouter)();let{isAuthenticated:s,isLoading:t,user:i}=(0,l.aC)();return t?a.jsx("div",{className:"min-h-screen bg-surface-950 flex items-center justify-center",children:a.jsx(n.$j,{size:"lg"})}):s?a.jsx(a.Fragment,{children:e}):null}var c=t(800);function o({children:e,allowedRoles:s,fallbackUrl:t="/dashboard"}){(0,r.useRouter)();let{role:n,isLoading:i}=(0,l.aC)(),o=n&&s.includes(n);return i?null:o?a.jsx(a.Fragment,{children:e}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(c.Z,{className:"h-12 w-12 text-surface-500 mb-4"}),a.jsx("h2",{className:"text-lg font-semibold text-surface-300",children:"Access Denied"}),a.jsx("p",{className:"text-sm text-surface-500 mt-1",children:"You don't have permission to view this page."})]})}},4224:(e,s,t)=>{"use strict";t.d(s,{x1:()=>a.Z});var a=t(5976)},2016:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`C:\Users\jaipr\Desktop\itilite\frontend\src\app\dashboard\expenses\page.tsx#default`)},2834:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`C:\Users\jaipr\Desktop\itilite\frontend\src\app\dashboard\layout.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[516,868,82],()=>t(7680));module.exports=a})();