"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[183],{3964:function(e,r,t){t.d(r,{qP:function(){return C},$8:function(){return P},Ct:function(){return g},zx:function(){return d},Zb:function(){return f},Ol:function(){return h},sm:function(){return _},II:function(){return u},IN:function(){return I},Ph:function(){return m},$j:function(){return l},OE:function(){return v},gx:function(){return x},sM:function(){return y},kH:function(){return N}});var s=t(57437),n=t(93448);let a={sm:"h-4 w-4 border-2",md:"h-6 w-6 border-2",lg:"h-8 w-8 border-3"};function l(e){let{size:r="md",className:t}=e;return(0,s.jsx)("div",{className:(0,n.cn)("animate-spin rounded-full border-surface-400 border-t-primary-500",a[r],t)})}var c=t(2265);let i={primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-surface-700 text-surface-100 hover:bg-surface-600 focus:ring-surface-500",danger:"bg-danger-600 text-white hover:bg-danger-500 focus:ring-danger-500","danger-outline":"border border-danger-600 text-danger-500 bg-transparent hover:bg-danger-600/10 focus:ring-danger-500",success:"bg-success-600 text-white hover:bg-success-500 focus:ring-success-500",ghost:"bg-transparent text-surface-300 hover:bg-surface-800 hover:text-surface-100"},o={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3 text-base"},d=(0,c.forwardRef)((e,r)=>{let{className:t,variant:a="primary",size:c="md",isLoading:d,disabled:u,children:m,...x}=e;return(0,s.jsxs)("button",{ref:r,disabled:u||d,className:(0,n.cn)("inline-flex items-center justify-center gap-2 font-medium rounded-xl transition-colors duration-150","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-surface-950","disabled:opacity-50 disabled:cursor-not-allowed",i[a],o[c],t),...x,children:[d&&(0,s.jsx)(l,{size:"sm"}),m]})});d.displayName="Button";let u=(0,c.forwardRef)((e,r)=>{let{className:t,label:a,error:l,id:c,...i}=e;return(0,s.jsxs)("div",{className:"w-full",children:[a&&(0,s.jsx)("label",{htmlFor:c,className:"block text-sm font-medium text-surface-300 mb-1.5",children:a}),(0,s.jsx)("input",{ref:r,id:c,className:(0,n.cn)("w-full px-4 py-2.5 bg-surface-900 border rounded-xl text-surface-100","placeholder-surface-500 transition-colors duration-150","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",l?"border-danger-500":"border-surface-700",t),...i}),l&&(0,s.jsx)("p",{className:"text-sm text-danger-500 mt-1",children:l})]})});u.displayName="Input";let m=(0,c.forwardRef)((e,r)=>{let{className:t,label:a,error:l,id:c,options:i,...o}=e;return(0,s.jsxs)("div",{className:"w-full",children:[a&&(0,s.jsx)("label",{htmlFor:c,className:"block text-sm font-medium text-surface-300 mb-1.5",children:a}),(0,s.jsx)("select",{ref:r,id:c,className:(0,n.cn)("w-full px-4 py-2.5 bg-surface-900 border rounded-xl text-surface-100","transition-colors duration-150 cursor-pointer","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",l?"border-danger-500":"border-surface-700",t),...o,children:i.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))}),l&&(0,s.jsx)("p",{className:"text-sm text-danger-500 mt-1",children:l})]})});m.displayName="Select";let x=(0,c.forwardRef)((e,r)=>{let{className:t,label:a,error:l,id:c,...i}=e;return(0,s.jsxs)("div",{className:"w-full",children:[a&&(0,s.jsx)("label",{htmlFor:c,className:"block text-sm font-medium text-surface-300 mb-1.5",children:a}),(0,s.jsx)("textarea",{ref:r,id:c,className:(0,n.cn)("w-full px-4 py-2.5 bg-surface-900 border rounded-xl text-surface-100","placeholder-surface-500 transition-colors duration-150 resize-none","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",l?"border-danger-500":"border-surface-700",t),...i}),l&&(0,s.jsx)("p",{className:"text-sm text-danger-500 mt-1",children:l})]})});function f(e){let{children:r,className:t}=e;return(0,s.jsx)("div",{className:(0,n.cn)("bg-surface-800 border border-surface-700 rounded-xl p-6",t),children:r})}function h(e){let{title:r,description:t,action:n}=e;return(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-surface-100",children:r}),t&&(0,s.jsx)("p",{className:"text-sm text-surface-400 mt-1",children:t})]}),n&&(0,s.jsx)("div",{children:n})]})}x.displayName="Textarea";let p={primary:"bg-primary-600/20 text-primary-400",success:"bg-success-600/20 text-success-500",warning:"bg-warning-600/20 text-warning-500",danger:"bg-danger-600/20 text-danger-500",neutral:"bg-surface-700 text-surface-300"};function g(e){let{variant:r="neutral",children:t,className:a}=e;return(0,s.jsx)("span",{className:(0,n.cn)("inline-flex items-center px-2.5 py-0.5 rounded-lg text-xs font-medium",p[r],a),children:t})}let b={draft:{label:"Draft",variant:"neutral"},submitted:{label:"Pending Approval",variant:"primary"},manager_approved:{label:"Approved",variant:"success"},manager_rejected:{label:"Rejected",variant:"danger"},booked:{label:"Booked",variant:"success"},completed:{label:"Completed",variant:"neutral"},cancelled:{label:"Cancelled",variant:"danger"},finance_approved:{label:"Approved",variant:"success"},finance_rejected:{label:"Rejected",variant:"danger"},flagged:{label:"Flagged",variant:"warning"}};function v(e){let{status:r,className:t}=e,n=b[r]||{label:r,variant:"neutral"};return(0,s.jsx)(g,{variant:n.variant,className:t,children:n.label})}var j=t(76865);function N(e){let{violations:r,className:t}=e;return 0===r.length?null:(0,s.jsxs)("div",{className:"p-4 bg-warning-600/10 border border-warning-600/30 rounded-xl ".concat(t||""),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)(j.Z,{className:"h-4 w-4 text-warning-500"}),(0,s.jsxs)("h4",{className:"text-sm font-semibold text-warning-500",children:["Policy Violations (",r.length,")"]})]}),(0,s.jsx)("div",{className:"space-y-2",children:r.map((e,r)=>(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-surface-200",children:e.message}),(0,s.jsxs)("p",{className:"text-xs text-surface-500 mt-0.5",children:["Code: ",e.code]})]}),(void 0!==e.amount||void 0!==e.limit)&&(0,s.jsxs)("div",{className:"text-right text-xs text-surface-400 whitespace-nowrap",children:[void 0!==e.amount&&(0,s.jsxs)("p",{children:["Actual: ",(0,s.jsx)("span",{className:"text-danger-500",children:(0,n.xG)(e.amount)})]}),void 0!==e.limit&&(0,s.jsxs)("p",{children:["Limit: ",(0,s.jsx)("span",{className:"text-surface-300",children:(0,n.xG)(e.limit)})]})]})]},r))})]})}function y(e){let{name:r,email:t,size:a="md",className:l}=e,c=r.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return(0,s.jsxs)("div",{className:(0,n.cn)("flex items-center gap-2.5",l),children:[(0,s.jsx)("div",{className:(0,n.cn)("rounded-full bg-primary-600/20 text-primary-400 flex items-center justify-center font-semibold flex-shrink-0","sm"===a?"h-7 w-7 text-xs":"h-9 w-9 text-sm"),children:c}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("p",{className:(0,n.cn)("font-medium text-surface-100 truncate","sm"===a?"text-xs":"text-sm"),children:r}),t&&(0,s.jsx)("p",{className:(0,n.cn)("text-surface-400 truncate","sm"===a?"text-[10px]":"text-xs"),children:t})]})]})}var w=t(41671),k=t(99388);function C(e){let{onApprove:r,onReject:t,isLoading:n=!1,title:a="Take Action"}=e,[l,i]=(0,c.useState)(""),o=n||0===l.trim().length;return(0,s.jsxs)(f,{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-surface-100 mb-4",children:a}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-surface-300 mb-1.5",children:["Comment ",(0,s.jsx)("span",{className:"text-surface-500",children:"(required for rejection)"})]}),(0,s.jsx)(x,{placeholder:"Add a comment...",rows:3,value:l,onChange:e=>i(e.target.value),disabled:n})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(d,{variant:"success",onClick:()=>r(l),isLoading:n,disabled:n,children:[(0,s.jsx)(w.Z,{className:"h-4 w-4"}),"Approve"]}),(0,s.jsxs)(d,{variant:"danger-outline",onClick:()=>t(l),isLoading:n,disabled:o,children:[(0,s.jsx)(k.Z,{className:"h-4 w-4"}),"Reject"]})]}),0===l.trim().length&&(0,s.jsx)("p",{className:"text-xs text-surface-500",children:"A comment is required to reject."})]})]})}var E=t(32489);function I(e){let{url:r,isOpen:t,onClose:n}=e,a=r.toLowerCase().endsWith(".pdf"),l=(0,c.useCallback)(e=>{"Escape"===e.key&&n()},[n]);return((0,c.useEffect)(()=>(t&&(document.addEventListener("keydown",l),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",l),document.body.style.overflow=""}),[t,l]),t)?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:n,children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-surface-950/80"}),(0,s.jsxs)("div",{className:"relative bg-surface-800 border border-surface-700 rounded-xl shadow-xl max-w-3xl w-full mx-4 max-h-[85vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-surface-700",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-surface-100",children:"Receipt Preview"}),(0,s.jsx)("button",{onClick:n,className:"p-1.5 rounded-lg text-surface-400 hover:bg-surface-700 hover:text-surface-100 transition-colors",children:(0,s.jsx)(E.Z,{className:"h-4 w-4"})})]}),(0,s.jsx)("div",{className:"flex-1 overflow-auto p-4",children:a?(0,s.jsx)("iframe",{src:r,className:"w-full h-[70vh] rounded-lg border border-surface-700",title:"Receipt PDF"}):(0,s.jsx)("img",{src:r,alt:"Receipt",className:"max-w-full h-auto rounded-lg mx-auto"})})]})]}):null}var A=t(91723);function P(e){let{logs:r,className:t}=e;return 0===r.length?null:(0,s.jsxs)("div",{className:t,children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(A.Z,{className:"h-4 w-4 text-surface-400"}),(0,s.jsx)("h4",{className:"text-sm font-semibold text-surface-100",children:"Audit Trail"})]}),(0,s.jsxs)("div",{className:"relative pl-6 space-y-4",children:[(0,s.jsx)("div",{className:"absolute left-[7px] top-1 bottom-1 w-px bg-surface-700"}),r.map((e,r)=>(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute -left-6 top-1.5 h-3 w-3 rounded-full border-2 border-surface-600 bg-surface-800"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-surface-200",children:e.action}),(0,s.jsxs)("span",{className:"text-xs text-surface-500",children:["by ",e.actorRole]})]}),(0,s.jsx)("p",{className:"text-xs text-surface-500 mt-0.5",children:(0,n.o0)(e.timestamp)}),e.note&&(0,s.jsx)("p",{className:"text-sm text-surface-400 mt-1 pl-3 border-l-2 border-surface-700",children:e.note})]})]},r))]})]})}function _(e){let{isOpen:r,title:t,message:n,confirmLabel:a="Confirm",cancelLabel:l="Cancel",variant:i="primary",isLoading:o=!1,onConfirm:u,onCancel:m}=e;return((0,c.useEffect)(()=>{let e=e=>{"Escape"!==e.key||o||m()};return r&&document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r,o,m]),r)?(0,s.jsx)("div",{className:"fixed inset-0 z-[9998] flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:o?void 0:m,children:(0,s.jsxs)("div",{className:"bg-surface-800 border border-surface-700 rounded-xl shadow-xl w-full max-w-md mx-4 p-6",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg ".concat("danger"===i?"bg-danger-600/20":"bg-primary-600/20"),children:(0,s.jsx)(j.Z,{className:"h-5 w-5 ".concat("danger"===i?"text-danger-500":"text-primary-400")})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-surface-100",children:t}),(0,s.jsx)("p",{className:"text-sm text-surface-400 mt-1",children:n})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,s.jsx)(d,{variant:"secondary",onClick:m,disabled:o,children:l}),(0,s.jsx)(d,{variant:"danger"===i?"danger":"primary",onClick:u,isLoading:o,children:a})]})]})}):null}},42590:function(e,r,t){var s=t(83464),n=t(37994);let a="http://localhost:3000/api";console.log("API BASE:",a);let l=s.Z.create({baseURL:a,headers:{"Content-Type":"application/json"}}),c=!1,i=[],o=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i.forEach(t=>{e?t.reject(e):r&&t.resolve(r)}),i=[]};l.interceptors.request.use(e=>{let r=(0,n.lz)();return(null==r?void 0:r.accessToken)&&(e.headers.Authorization="Bearer ".concat(r.accessToken)),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>{var r,t;let d=e.config;if((null===(r=e.response)||void 0===r?void 0:r.status)!==401||d._retry||(null===(t=d.url)||void 0===t?void 0:t.includes("/auth/")))return Promise.reject(e);let u=(0,n.lz)();if(!(null==u?void 0:u.refreshToken))return(0,n.yE)(),window.location.href="/login",Promise.reject(e);if(c)return new Promise((e,r)=>{i.push({resolve:e,reject:r})}).then(e=>(d.headers.Authorization="Bearer ".concat(e),l(d))).catch(e=>Promise.reject(e));d._retry=!0,c=!0;try{let{accessToken:e,refreshToken:r}=(await s.Z.post("".concat(a,"/auth/refresh"),{refreshToken:u.refreshToken})).data.data;return(0,n.d0)({accessToken:e,refreshToken:r}),o(null,e),d.headers.Authorization="Bearer ".concat(e),l(d)}catch(e){return o(e,null),(0,n.yE)(),window.location.href="/login",Promise.reject(e)}finally{c=!1}}),r.Z=l},37994:function(e,r,t){t.d(r,{d0:function(){return l},lz:function(){return a},yE:function(){return c}});let s="itilite_access_token",n="itilite_refresh_token";function a(){let e=localStorage.getItem(s),r=localStorage.getItem(n);return e&&r?{accessToken:e,refreshToken:r}:null}function l(e){localStorage.setItem(s,e.accessToken),localStorage.setItem(n,e.refreshToken)}function c(){localStorage.removeItem(s),localStorage.removeItem(n)}},93448:function(e,r,t){t.d(r,{cn:function(){return n},o0:function(){return c},p6:function(){return l},xG:function(){return a}});var s=t(61994);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.W)(r)}function a(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INR";return new Intl.NumberFormat("en-IN",{style:"currency",currency:r,maximumFractionDigits:0}).format(e)}function l(e){return new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}function c(e){return new Date(e).toLocaleString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}}}]);