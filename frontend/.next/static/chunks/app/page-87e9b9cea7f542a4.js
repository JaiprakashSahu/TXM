(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{77522:function(e,t,r){Promise.resolve().then(r.bind(r,16117))},91723:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},33245:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},76865:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},99376:function(e,t,r){"use strict";var n=r(35475);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},16117:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var n=r(57437),s=r(2265),a=r(99376),i=r(95932),o=r(3964);function u(){let e=(0,a.useRouter)(),{isAuthenticated:t,isLoading:r}=(0,i.aC)();return(0,s.useEffect)(()=>{r||(t?e.replace("/dashboard"):e.replace("/login"))},[t,r,e]),(0,n.jsx)("div",{className:"min-h-screen bg-surface-950 flex items-center justify-center",children:(0,n.jsx)(o.$j,{size:"lg"})})}},14362:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return c},useAuth:function(){return l}});var n=r(57437),s=r(2265),a=r(14474),i=r(37994),o=r(42590);let u=(0,s.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,s.useState)(null),[l,f]=(0,s.useState)(!0),d=(0,s.useCallback)(e=>{try{return(0,a.o)(e)}catch(e){return null}},[]),h=(0,s.useCallback)(async()=>{try{let e=await o.Z.get("/auth/profile");e.data.success&&c(e.data.data)}catch(e){(0,i.yE)(),c(null)}},[]);(0,s.useEffect)(()=>{(async()=>{let e=(0,i.lz)();if(null==e?void 0:e.accessToken){let t=d(e.accessToken);if(t&&1e3*t.exp>Date.now())await h();else try{let t=(await o.Z.post("/auth/refresh",{refreshToken:e.refreshToken})).data.data;(0,i.d0)(t),await h()}catch(e){(0,i.yE)()}}f(!1)})()},[d,h]);let p=(0,s.useCallback)(async(e,t)=>{let r=await o.Z.post("/auth/login",{email:e,password:t});if(r.data.success){let{accessToken:e,refreshToken:t,user:n}=r.data.data;(0,i.d0)({accessToken:e,refreshToken:t}),c(n)}else throw Error(r.data.message||"Login failed")},[]),m=(0,s.useCallback)(()=>{let e=(0,i.lz)();(null==e?void 0:e.refreshToken)&&o.Z.post("/auth/logout",{refreshToken:e.refreshToken}).catch(()=>{}),(0,i.yE)(),c(null)},[]),g={user:r,role:(null==r?void 0:r.role)||null,isAuthenticated:!!r,isLoading:l,login:p,logout:m};return(0,n.jsx)(u.Provider,{value:g,children:t})}function l(){let e=(0,s.useContext)(u);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},98319:function(e,t,r){"use strict";r.d(t,{ToastProvider:function(){return h},useToast:function(){return l}});var n=r(57437),s=r(2265),a=r(41671),i=r(99388),o=r(33245),u=r(32489);let c=(0,s.createContext)(null);function l(){let e=(0,s.useContext)(c);if(!e)throw Error("useToast must be used within ToastProvider");return e}let f={success:a.Z,error:i.Z,info:o.Z},d={success:"bg-success-600/90 text-white",error:"bg-danger-600/90 text-white",info:"bg-primary-600/90 text-white"};function h(e){let{children:t}=e,[r,a]=(0,s.useState)([]),i=(0,s.useCallback)((e,t)=>{let r=Date.now().toString()+Math.random().toString(36).slice(2);a(n=>[...n,{id:r,type:e,message:t}]),setTimeout(()=>{a(e=>e.filter(e=>e.id!==r))},4e3)},[]),o=(0,s.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e))},[]);return(0,n.jsxs)(c.Provider,{value:{toast:{success:e=>i("success",e),error:e=>i("error",e),info:e=>i("info",e)}},children:[t,(0,n.jsx)("div",{className:"fixed bottom-6 right-6 z-[9999] flex flex-col gap-2 pointer-events-none",children:r.map(e=>{let t=f[e.type];return(0,n.jsxs)("div",{className:"pointer-events-auto flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg ".concat(d[e.type]," animate-slide-up min-w-[280px] max-w-[400px]"),children:[(0,n.jsx)(t,{className:"h-5 w-5 flex-shrink-0"}),(0,n.jsx)("p",{className:"text-sm flex-1",children:e.message}),(0,n.jsx)("button",{onClick:()=>o(e.id),className:"opacity-70 hover:opacity-100",children:(0,n.jsx)(u.Z,{className:"h-4 w-4"})})]},e.id)})})]})}},95932:function(e,t,r){"use strict";r.d(t,{aC:function(){return n.useAuth},pm:function(){return s.useToast}});var n=r(14362),s=r(98319)},61994:function(e,t,r){"use strict";function n(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=function e(t){var r,n,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(n=e(t[r]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n)}return s}(e))&&(n&&(n+=" "),n+=t);return n}r.d(t,{W:function(){return n}})},14474:function(e,t,r){"use strict";r.d(t,{o:function(){return s}});class n extends Error{}function s(e,t){let r;if("string"!=typeof e)throw new n("Invalid token specified: must be a string");t||(t={});let s=!0===t.header?0:1,a=e.split(".")[s];if("string"!=typeof a)throw new n(`Invalid token specified: missing part #${s+1}`);try{r=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var r;return r=t,decodeURIComponent(atob(r).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}catch(e){return atob(t)}}(a)}catch(e){throw new n(`Invalid token specified: invalid base64 for part #${s+1} (${e.message})`)}try{return JSON.parse(r)}catch(e){throw new n(`Invalid token specified: invalid json for part #${s+1} (${e.message})`)}}n.prototype.name="InvalidTokenError"}},function(e){e.O(0,[647,183,971,117,744],function(){return e(e.s=77522)}),_N_E=e.O()}]);