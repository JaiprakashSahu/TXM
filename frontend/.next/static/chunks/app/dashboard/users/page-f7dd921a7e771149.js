(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[618],{34031:function(e,s,a){Promise.resolve().then(a.bind(a,48722))},48722:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return p}});var t=a(57437),r=a(2265),l=a(99397),c=a(73247),n=a(92369),d=a(71533),i=a(3964),x=a(42590),o=a(30401),u=a(78867),m=a(32489);function f(e){let{isOpen:s,onClose:a,onSuccess:l}=e,[c,n]=(0,r.useState)(""),[d,f]=(0,r.useState)(""),[h,p]=(0,r.useState)("employee"),[j,b]=(0,r.useState)(!1),[N,g]=(0,r.useState)(""),[y,v]=(0,r.useState)(""),[w,C]=(0,r.useState)(!1);if(!s)return null;let S=async e=>{e.preventDefault(),g(""),b(!0);try{let e=await x.Z.post("/users",{name:c,email:d,role:h});e.data.success&&(v(e.data.data.tempPassword),l())}catch(e){var s,a;g((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to create user")}finally{b(!1)}},k=()=>{n(""),f(""),p("employee"),v(""),g(""),a()};return y?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,t.jsx)("div",{className:"bg-surface-900 border border-surface-700 rounded-xl w-full max-w-md p-6 shadow-2xl",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"mx-auto w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center",children:(0,t.jsx)(o.Z,{className:"w-6 h-6 text-green-500"})}),(0,t.jsx)("h2",{className:"text-xl font-bold text-surface-50",children:"User Created Successfully"}),(0,t.jsx)("p",{className:"text-sm text-surface-400",children:"Share this temporary password with the user. They will be required to change it on first login."}),(0,t.jsxs)("div",{className:"bg-surface-950 border border-surface-800 rounded-lg p-4 flex items-center justify-between gap-2",children:[(0,t.jsx)("code",{className:"text-primary-400 font-mono text-lg",children:y}),(0,t.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(y),C(!0),setTimeout(()=>C(!1),2e3)},className:"p-2 hover:bg-surface-800 rounded-lg transition-colors text-surface-400 hover:text-surface-200",title:"Copy to clipboard",children:w?(0,t.jsx)(o.Z,{className:"w-5 h-5 text-green-500"}):(0,t.jsx)(u.Z,{className:"w-5 h-5"})})]}),(0,t.jsx)(i.zx,{onClick:k,className:"w-full",children:"Close"})]})})}):(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"bg-surface-900 border border-surface-700 rounded-xl w-full max-w-md shadow-2xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-surface-800",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-surface-50",children:"Add New User"}),(0,t.jsx)("button",{onClick:k,className:"text-surface-400 hover:text-surface-200 transition-colors",children:(0,t.jsx)(m.Z,{className:"w-5 h-5"})})]}),(0,t.jsxs)("form",{onSubmit:S,className:"p-6 space-y-4",children:[N&&(0,t.jsx)("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-sm text-red-500",children:N}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-surface-200",children:"Full Name"}),(0,t.jsx)(i.II,{value:c,onChange:e=>n(e.target.value),placeholder:"e.g. Rahul Sharma",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-surface-200",children:"Email Address"}),(0,t.jsx)(i.II,{type:"email",value:d,onChange:e=>f(e.target.value),placeholder:"e.g. rahul@test.com",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-surface-200",children:"Role"}),(0,t.jsx)(i.Ph,{value:h,onChange:e=>p(e.target.value),options:[{value:"employee",label:"Employee"},{value:"manager",label:"Manager"},{value:"finance",label:"Finance"}]})]}),(0,t.jsxs)("div",{className:"pt-2 flex gap-3",children:[(0,t.jsx)(i.zx,{type:"button",variant:"secondary",className:"flex-1",onClick:k,children:"Cancel"}),(0,t.jsx)(i.zx,{type:"submit",className:"flex-1",isLoading:j,children:"Create User"})]})]})]})})}var h=a(64014);function p(){let[e,s]=(0,r.useState)([]),[a,o]=(0,r.useState)(!0),[u,m]=(0,r.useState)(!1),[p,j]=(0,r.useState)(""),b=async()=>{o(!0);try{let e=await x.Z.get("/users");e.data.success&&s(e.data.data)}catch(e){console.error("Failed to fetch users",e)}finally{o(!1)}};(0,r.useEffect)(()=>{b()},[]);let N=e.filter(e=>e.name.toLowerCase().includes(p.toLowerCase())||e.email.toLowerCase().includes(p.toLowerCase()));return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-surface-50",children:"Users Management"}),(0,t.jsx)("p",{className:"text-sm text-surface-400",children:"Manage system access and roles"})]}),(0,t.jsxs)(i.zx,{onClick:()=>m(!0),children:[(0,t.jsx)(l.Z,{className:"w-4 h-4 mr-2"}),"Add User"]})]}),(0,t.jsx)("div",{className:"flex items-center gap-4 bg-surface-900 p-4 rounded-xl border border-surface-800",children:(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,t.jsx)(c.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-surface-400"}),(0,t.jsx)(i.II,{placeholder:"Search users...",className:"pl-9 bg-surface-950 border-surface-700",value:p,onChange:e=>j(e.target.value)})]})}),(0,t.jsx)("div",{className:"bg-surface-900 rounded-xl border border-surface-800 overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{className:"bg-surface-950 border-b border-surface-800",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-surface-400 uppercase tracking-wider",children:"User"}),(0,t.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-surface-400 uppercase tracking-wider",children:"Role"}),(0,t.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-surface-400 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-surface-400 uppercase tracking-wider",children:"Joined"}),(0,t.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-surface-400 uppercase tracking-wider text-right",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-surface-800",children:a?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"px-6 py-8 text-center text-surface-400",children:"Loading users..."})}):0===N.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"px-6 py-8 text-center text-surface-400",children:"No users found"})}):N.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-surface-800/50 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-surface-800 flex items-center justify-center text-surface-400",children:(0,t.jsx)(n.Z,{className:"w-4 h-4"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-surface-100",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-surface-500",children:e.email})]})]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-500/10 text-primary-400 capitalize",children:e.role})}),(0,t.jsx)("td",{className:"px-6 py-4",children:e.mustChangePassword?(0,t.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-500/10 text-yellow-500",children:[(0,t.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-yellow-500 animate-pulse"}),"Pending Activation"]}):(0,t.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-500/10 text-green-500",children:[(0,t.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),"Active"]})}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-surface-400",children:(0,h.WU)(new Date(e.createdAt),"MMM d, yyyy")}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:(0,t.jsx)(i.zx,{variant:"ghost",size:"sm",children:(0,t.jsx)(d.Z,{className:"w-4 h-4 text-surface-400"})})})]},e._id))})]})})}),(0,t.jsx)(f,{isOpen:u,onClose:()=>m(!1),onSuccess:()=>{b()}})]})}}},function(e){e.O(0,[647,34,183,971,117,744],function(){return e(e.s=34031)}),_N_E=e.O()}]);