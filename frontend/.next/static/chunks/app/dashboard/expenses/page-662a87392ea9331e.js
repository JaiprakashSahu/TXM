(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[342],{72659:function(e,t,a){Promise.resolve().then(a.bind(a,5982))},91723:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},99397:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},71621:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]])},76865:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5982:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var s=a(57437),n=a(2265),l=a(19465),r=a(93448),i=a(3964),c=a(99397);let d=(0,a(79205).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var o=a(71621),u=a(76865);let p={submitted:"primary",finance_approved:"success",finance_rejected:"danger",flagged:"warning"},x={flight:"Flight",hotel:"Hotel",food:"Food",transport:"Transport",other:"Other"};function h(){let[e,t]=(0,n.useState)([]),[a,h]=(0,n.useState)(!0),[m,f]=(0,n.useState)(null),[v,g]=(0,n.useState)(!1),[y,j]=(0,n.useState)({travelRequestId:"",amount:"",category:"other",expenseDate:"",description:""}),[b,N]=(0,n.useState)(null),[k,w]=(0,n.useState)(!1);(0,n.useEffect)(()=>{I()},[]);let I=async()=>{try{let e=await l.x1.get("/expenses/my");t(e.data.data||[])}catch(t){var e,a;f((null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.message)||"Failed to load expenses")}finally{h(!1)}},C=async e=>{e.preventDefault(),w(!0),f(null);try{let e=new FormData;e.append("travelRequestId",y.travelRequestId),e.append("amount",y.amount),e.append("category",y.category),e.append("expenseDate",y.expenseDate),e.append("description",y.description),b&&e.append("receipt",b),await l.x1.post("/expenses",e,{headers:{"Content-Type":"multipart/form-data"}}),g(!1),j({travelRequestId:"",amount:"",category:"other",expenseDate:"",description:""}),N(null),I()}catch(e){var t,a;f((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to submit expense")}finally{w(!1)}};return a?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)(i.$j,{size:"lg"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-surface-100",children:"Expenses"}),(0,s.jsx)("p",{className:"text-surface-400 mt-1",children:"Track and submit your travel expenses"})]}),(0,s.jsxs)(i.zx,{onClick:()=>g(!v),children:[(0,s.jsx)(c.Z,{className:"h-4 w-4"}),"Add Expense"]})]}),m&&(0,s.jsx)("div",{className:"p-4 bg-danger-600/10 border border-danger-600/30 rounded-xl",children:(0,s.jsx)("p",{className:"text-sm text-danger-500",children:m})}),v&&(0,s.jsxs)(i.Zb,{children:[(0,s.jsx)(i.Ol,{title:"New Expense"}),(0,s.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,s.jsx)(i.II,{id:"travelRequestId",label:"Travel Request ID",placeholder:"Enter travel request ID",value:y.travelRequestId,onChange:e=>j({...y,travelRequestId:e.target.value}),required:!0}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(i.II,{id:"amount",type:"number",label:"Amount (INR)",placeholder:"5000",value:y.amount,onChange:e=>j({...y,amount:e.target.value}),required:!0}),(0,s.jsx)(i.Ph,{id:"category",label:"Category",options:[{value:"flight",label:"Flight"},{value:"hotel",label:"Hotel"},{value:"food",label:"Food"},{value:"transport",label:"Transport"},{value:"other",label:"Other"}],value:y.category,onChange:e=>j({...y,category:e.target.value})})]}),(0,s.jsx)(i.II,{id:"expenseDate",type:"date",label:"Expense Date",value:y.expenseDate,onChange:e=>j({...y,expenseDate:e.target.value}),required:!0}),(0,s.jsx)(i.II,{id:"description",label:"Description",placeholder:"Describe the expense...",value:y.description,onChange:e=>j({...y,description:e.target.value})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Receipt"}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)("label",{className:"flex items-center gap-2 px-4 py-2.5 bg-surface-700 text-surface-100 rounded-xl cursor-pointer hover:bg-surface-600 transition-colors",children:[(0,s.jsx)(d,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-sm",children:b?b.name:"Upload receipt"}),(0,s.jsx)("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:e=>{var t;return N((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}})]})})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,s.jsx)(i.zx,{type:"submit",isLoading:k,children:"Submit Expense"}),(0,s.jsx)(i.zx,{type:"button",variant:"secondary",onClick:()=>g(!1),children:"Cancel"})]})]})]}),0===e.length?(0,s.jsx)(i.Zb,{children:(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(o.Z,{className:"h-12 w-12 text-surface-500 mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-surface-400",children:"No expenses submitted yet."})]})}):(0,s.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,s.jsx)(i.Zb,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)(i.Ct,{variant:"neutral",children:x[e.category]}),(0,s.jsx)(i.Ct,{variant:p[e.status],children:e.status.replace("_"," ")}),e.violations.length>0&&(0,s.jsxs)(i.Ct,{variant:"warning",children:[(0,s.jsx)(u.Z,{className:"h-3 w-3 mr-1"}),"Violation"]})]}),(0,s.jsx)("p",{className:"text-lg font-semibold text-surface-100",children:(0,r.xG)(e.amount)}),(0,s.jsxs)("p",{className:"text-sm text-surface-400 mt-1",children:[(0,r.p6)(e.expenseDate),e.description&&" â€¢ ".concat(e.description)]}),e.flaggedReason&&(0,s.jsxs)("p",{className:"text-sm text-warning-500 mt-2",children:["Flagged: ",e.flaggedReason]})]}),e.receiptUrl&&(0,s.jsx)("a",{href:e.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary-400 hover:underline",children:"View Receipt"})]})},e._id))})]})}},19465:function(e,t,a){"use strict";a.d(t,{x1:function(){return s.Z}});var s=a(42590)},61994:function(e,t,a){"use strict";function s(){for(var e,t,a=0,s="",n=arguments.length;a<n;a++)(e=arguments[a])&&(t=function e(t){var a,s,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var l=t.length;for(a=0;a<l;a++)t[a]&&(s=e(t[a]))&&(n&&(n+=" "),n+=s)}else for(s in t)t[s]&&(n&&(n+=" "),n+=s)}return n}(e))&&(s&&(s+=" "),s+=t);return s}a.d(t,{W:function(){return s}})}},function(e){e.O(0,[647,183,971,117,744],function(){return e(e.s=72659)}),_N_E=e.O()}]);