(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[401],{65682:function(e,a,t){Promise.resolve().then(t.bind(t,25857))},32660:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(79205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},25857:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return p}});var s=t(57437),r=t(2265),n=t(99376),i=t(29501),l=t(13590),d=t(67119),o=t(19465),u=t(3964),c=t(32660),m=t(27648);let x=d.Ry({destination:d.Z_().min(1,"Destination is required").max(200),startDate:d.Z_().min(1,"Start date is required"),endDate:d.Z_().min(1,"End date is required"),estimatedCost:d.oQ.number().min(0,"Cost must be positive"),purpose:d.Z_().min(1,"Purpose is required").max(1e3),managerId:d.Z_().min(1,"Please select a manager")});function p(){var e,a,t,d,p,v,h;let g=(0,n.useRouter)(),[f,b]=(0,r.useState)([]),[j,I]=(0,r.useState)(!1),[y,D]=(0,r.useState)(null),{register:N,handleSubmit:_,formState:{errors:C}}=(0,i.cI)({resolver:(0,l.F)(x)});(0,r.useEffect)(()=>{(async()=>{try{let e=(await o.x1.get("/auth/managers")).data.data||[];b(e.map(e=>({value:e._id,label:"".concat(e.name," (").concat(e.email,")")})))}catch(e){b([])}})()},[]);let w=async e=>{D(null),I(!0);try{await o.x1.post("/travel",e),g.push("/dashboard/travel")}catch(e){var a,t;D((null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||"Failed to create travel request")}finally{I(!1)}};return(0,s.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(m.default,{href:"/dashboard/travel",children:(0,s.jsx)(u.zx,{variant:"ghost",size:"sm",children:(0,s.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-surface-100",children:"New Travel Request"}),(0,s.jsx)("p",{className:"text-surface-400 mt-1",children:"Create a new travel request for approval"})]})]}),(0,s.jsxs)(u.Zb,{children:[y&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-danger-600/10 border border-danger-600/30 rounded-xl",children:(0,s.jsx)("p",{className:"text-sm text-danger-500",children:y})}),(0,s.jsxs)("form",{onSubmit:_(w),className:"space-y-4",children:[(0,s.jsx)(u.II,{id:"destination",label:"Destination",placeholder:"e.g., Mumbai, India",error:null===(e=C.destination)||void 0===e?void 0:e.message,...N("destination")}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(u.II,{id:"startDate",type:"date",label:"Start Date",error:null===(a=C.startDate)||void 0===a?void 0:a.message,...N("startDate")}),(0,s.jsx)(u.II,{id:"endDate",type:"date",label:"End Date",error:null===(t=C.endDate)||void 0===t?void 0:t.message,...N("endDate")})]}),(0,s.jsx)(u.II,{id:"estimatedCost",type:"number",label:"Estimated Cost (INR)",placeholder:"50000",error:null===(d=C.estimatedCost)||void 0===d?void 0:d.message,...N("estimatedCost")}),(0,s.jsx)(u.gx,{id:"purpose",label:"Purpose",placeholder:"Describe the purpose of this travel...",rows:4,error:null===(p=C.purpose)||void 0===p?void 0:p.message,...N("purpose")}),f.length>0?(0,s.jsx)(u.Ph,{id:"managerId",label:"Approving Manager",options:[{value:"",label:"Select a manager"},...f],error:null===(v=C.managerId)||void 0===v?void 0:v.message,...N("managerId")}):(0,s.jsx)(u.II,{id:"managerId",label:"Manager ID",placeholder:"Enter manager ID",error:null===(h=C.managerId)||void 0===h?void 0:h.message,...N("managerId")}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)(u.zx,{type:"submit",isLoading:j,children:"Create Request"}),(0,s.jsx)(m.default,{href:"/dashboard/travel",children:(0,s.jsx)(u.zx,{type:"button",variant:"secondary",children:"Cancel"})})]})]})]})]})}},19465:function(e,a,t){"use strict";t.d(a,{x1:function(){return s.Z}});var s=t(42590)}},function(e){e.O(0,[647,383,245,183,971,117,744],function(){return e(e.s=65682)}),_N_E=e.O()}]);